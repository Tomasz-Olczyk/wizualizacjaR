---
title: "Podstawy R i RStudio"
author: "Tomasz Olczyk"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```



## RStudio podstawwoe informacje

Panele

Pliki

Skrypty

RMarkdown

Konsola

# Instalacja pakietów

Pakiet R jest kolekcją funkcji, danych i dokumentacji, która rozszerza
możliwości bazowego R

```{r}

#install.packages("tidyverse")

```

## Wczytywanie pakieteów(bibliotek)

```{r}

library(tidyverse)

```

```{r}

install.packages("gapminder")
library(gapminder)
```


# Obiekty i funkcje

Nazwy obiektów muszą rozpocznyć si od litry i mogą zawierać tylko litery, cyfry znak _ oraz . .


```{r}

class(1)

```



```{r}

class("1")

```


```{r}

two <- 2

Two <- 2.2



```


```{r}

logiczne <- two == Two

logiczne

```


```{r}

class(logiczne)

```

Obiekt i operator przypisania. Zapisuje obiekt "data", zawierający dane
gapminder

```{r}

data <- (gapminder)

```

```{r}

data("gapminder")

```

## Wgląd w dane w ramce

```{r}

str(data)

```

Wyświetla 6 pierwszych wierszy

```{r}

head(data)

```

Wyświetla ostatnich sześć wierszy

```{r}

tail(data)

```

Funkcja glimpse z pakietu dplyr. Podwójny nazwa funkcji poprzedzona
dwukropkiem i nazwą biblioteki informuje ustala z której biblioteki ma
być zastosowana funkcja o danej nazwie. Przydatne, gdy jest wiele
funkcji o tych samych nazwach z różnych bibliotek,

```{r}

dplyr::glimpse(data)

```

## Wektory

Tworzenie wektorów

```{r}

partie <- c("KO", "PiS", "Lewica", "Konfederacja", "TD")
partie

```

Wektor napisów

```{r}
typeof(partie)
```

```{r}
class(partie)
```

Wektor liczb

```{r}
sondaż <- c(29, 35, 10, 10, 10)

```

```{r}

typeof(sondaż)

```


Indeksowanie



```{r}

wektor <- 3:103

```

```{r}

co_drugi <- seq(from = 1, to = length(LETTERS), by  = 2)

LETTERS[co_drugi]


```



```{r}

wektor[0]

```

```{r}

wektor[1]

```


wektor logiczny




## Ramki danych

Matryca z dwóch wektorów

```{r}

matryca <- cbind(partie, sondaż)
matryca
```

```{r}

sondaż_2 <-  c(12, 23, 11)

```

```{r}

glimpse(matryca)

```

```{r}
matryca <- cbind(partie, sondaż_2)
matryca
```

```{r}

ramka_danych <- data.frame(partie, sondaż)

```

```{r}
glimpse(ramka_danych)
```

```{r}

ramka_danych_2 <- data.frame(partie, sondaż_2)

```

Jak połączyć wektory nierównych długości w ramkę danych:
[link](https://www.geeksforgeeks.org/create-dataframe-of-unequal-length-in-r/)

## Wczytywanie danych


```{r}
?read.delim
```

```{r}
?read.table
```


```{r}

panteon <- read_csv("https://raw.githubusercontent.com/Tomasz-Olczyk/wizualizacjaR/main/podstawy/panteon_s.csv")

```

## Zapisywanie danych

## Indeksowanie C.D.

```{r}

pięć_kolumn <- panteon[1:5]

```



```{r}

sześć_wierszy <- panteon[1:6,]

```


```{r}

sześć_wierszy_pięciu_kolumn <- panteon[1:6, 1:5]
sześć_wierszy_pięciu_kolumn
```



```{r}


panteon$gender

```


Indeksowanie wektora

```{r}

panteon$countryName[1:6]


```



```{r}

piąta_kolumna <- panteon[,5]


```


Czwarty element z piątej kolumny

```{r}

piąta_kolumna[4]

```

Zakres


```{r}

range(panteon$HPI)

```


Średnia

```{r}

mean(panteon$HPI)

```


summary

```{r}

summary(panteon$domain)

```


```{r}

class(panteon$domain)

```


```{r}

table(panteon$gender)

```


## Przykłady wykresów  w bazowym R

```{r}

hist(panteon$HPI)

```



```{r}

boxplot(panteon$HPI)


```


```{r}

boxplot(HPI~gender, data = panteon)

```



```{r}

domeny <- table(panteon$domain)

barplot(domeny, 
        horiz = TRUE,
        las =1)

```

```{r}

?barplot

```


```{r}

domeny_gender <- table(panteon$gender,
                       panteon$domain)

barplot(domeny_gender,
        las = 1, # orientacja etykiet osi
        beside = TRUE, #słupki obok siebie
        horiz = TRUE)

legend("topright", 
       c("mężczyzna", "kobieta"),
       fill = c("grey", "black"))
```



```{r}

par(mar=c(3,12,3,3)) # marginesy w kolejności par(mar = c(bottom, left, top, right))
#czyli dół, lewy, góra, rawy

barplot(domeny_gender,
        las = 1, 
        beside = TRUE,
        horiz = TRUE)

legend("topright", 
       c("mężczyzna", "kobieta"),
       fill = c("lightgrey", "gray39"))
```


```{r}

par(mar=c(5,12,3,3)) # marginesy w kolejności par(mar = c(bottom, left, top, right))
#czyli dół, lewy, góra, prawy

barplot(domeny_gender,
        las = 1, 
        beside = TRUE,
        horiz = TRUE,
        xlab = "liczba biografii",
        main = "Biografie w zbiorze Panteon 1.0 według dziedziny działalności i płci")

legend("topright", 
       c("mężczyzna", "kobieta"),
       fill = c("lightgrey", "gray39"))
dev.off()
```



```{r}


range(panteon$L_star)

```


```{r}

hist(panteon$L_star)


```


mozaikowy


```{r}
?mosaicplot
```


```{r}

mosaicplot(~domain+gender, data = panteon)

```


```{r}

mosaicplot(~domain+gender, 
           data = panteon,
           border = "white",
           col = c("grey40", "grey70"))


```



```{r}



mosaicplot(~domain + gender, 
           data = panteon,
           color = TRUE)


```

kolejność


```{r}


(domeny_ko <- as.data.frame(table(panteon$domain)))


```



```{r}

panteon$domain <- factor(panteon$domain, levels = c("INSTITUTIONS", 
                                                    "ARTS", 
                                                    "SPORTS", 
                                                    "SCIENCE & TECHNOLOGY",
                                                    "HUMANITIES", 
                                                    "PUBLIC FIGURE", 
                                                    "BUSINESS & LAW", 
                                                    "EXPLORATION"))

```


```{r}

panteon$domain <- factor(panteon$domain, levels = domeny_ko$Var1)
                           
```




```{r}

mosaicplot(~domain + gender, 
           data = panteon,
           color = TRUE,
           las =2)


```



```{r}


mosaicplot(~continentName + gender, 
           data = panteon,
           color = TRUE)


```


## Pomoc

```{r}

?help()

```


```{r}

help(help)

```


```{r}
```


```{r}
```



## Katalog roboczy

Zasadniczo lepiej operować używając rproj w RStudio niż katalogu roboczego.

Informacja o katalogu roboczym:

```{r}

getwd()

```

Ustawianie katalogu roboczego

```{r}


setwd() # argumentem jest ścieżka dostępu do katalogu roboczego w cudzysłowie


```



## Skrypty


Skróty: ctrl enter - uruchamia zaznaczony fragment kodu
ctrl shift enter - uruchamia cały skrypt

## Pliki R Markdown

Poświęcimy im oddzielne zajęćia